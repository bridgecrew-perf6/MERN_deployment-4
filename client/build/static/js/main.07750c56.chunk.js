(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),r=a(22),i=a.n(r),l=(a(30),a(31),a(5)),o=a(2),j=a(4),d=a.n(j),u=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(""),j=Object(o.a)(i,2),u=j[0],b=j[1],h=Object(n.useState)(2020),O=Object(o.a)(h,2),m=O[0],x=O[1],v=Object(n.useState)(""),p=Object(o.a)(v,2),g=p[0],f=p[1],N=Object(n.useState)({}),y=Object(o.a)(N,2),w=y[0],C=y[1];Object(n.useEffect)((function(){d.a.get("http://localhost:8000/restaurants/".concat(e._id)).then((function(t){console.log("theeeee id",e._id),r(t.data.restaurant.name),b(t.data.restaurant.cuisine),x(t.data.restaurant.yearOpened),f(t.data.restaurant.description)})).catch((function(e){return console.error(e)}))}),[]);return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col-sm-8 offset-sm-2 ",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"Update A  Restaurant "}),Object(c.jsx)("div",{className:"card body",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a={name:s,cuisine:u,yearOpened:m,description:g};d.a.put("http://localhost:8000/restaurants/update/".concat(e._id),a).then((function(e){console.log(e.data.restaurants),e.data.errors?C(e.data.errors):Object(l.c)("/")})).catch((function(e){return console.error(e)}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Name: "}),Object(c.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return r(e.target.value)},value:s}),Object(c.jsx)("p",{className:"text-danger",children:w.name?w.name.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Cuisine: "}),Object(c.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return b(e.target.value)},value:u}),Object(c.jsx)("p",{className:"text-danger",children:w.cuisine?w.cuisine.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Year Established: "}),Object(c.jsx)("input",{type:"Number",className:"form-control ",max:"2020",onChange:function(e){return x(e.target.value)},value:m}),Object(c.jsx)("p",{className:"text-danger",children:w.yearOpened?w.yearOpened.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Description: "}),Object(c.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return f(e.target.value)},value:g}),Object(c.jsx)("p",{className:"text-danger",children:w.description?w.description.message:""})]}),Object(c.jsx)("input",{type:"submit",value:"Update A New Restaurant ",className:"btn btn-primary"})]})})]})})})})},b=a(10),h=a(9),O=a(11),m=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(""),j=Object(o.a)(i,2),u=j[0],m=j[1];function x(){d.a.get("http://localhost:8000/restaurants").then((function(e){console.log(e.data.restaurants),r(function(e){for(var t=Object(O.a)(e),a=0;a<t.length;a++)for(var c=0;c<t.length-1;c++)if(t[c].ratingAverage<t[c+1].ratingAverage){var n=[t[c+1],t[c]];t[c]=n[0],t[c+1]=n[1]}return t}(function(e){var t,a=[],c=Object(h.a)(e);try{for(c.s();!(t=c.n()).done;){var n=t.value;if(n.reviews.length<1)a.push(Object(b.a)(Object(b.a)({},n),{},{ratingAverage:0}));else{var s,r=0,i=Object(h.a)(n.reviews);try{for(i.s();!(s=i.n()).done;)r+=s.value.rating}catch(o){i.e(o)}finally{i.f()}var l=r/n.reviews.length;a.push(Object(b.a)(Object(b.a)({},n),{},{ratingAverage:l.toFixed(1)}))}}}catch(o){c.e(o)}finally{c.f()}return a}(e.data.restaurants)))})).catch((function(e){return console.error(e)}))}Object(n.useEffect)((function(){x()}),[]);return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("input",{type:"search",placeholder:"search",className:" search col-sm-6 mt-2 mb-2 my-2",onChange:function(e){return m(e.target.value)}}),s.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())})).length<1?Object(c.jsx)("p",{children:"No results"}):"",s.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())})).map((function(e){return Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsxs)("div",{className:"card-header bg-dark text-light",children:[e.name," "]}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("p",{children:["Cuisine: ",e.cuisine,"  "]}),Object(c.jsxs)("p",{children:["Year Established: ",e.yearOpened,"  "]}),Object(c.jsxs)("p",{children:["Description: ",e.description,"  "]}),Object(c.jsxs)("p",{children:["Average Rating: ",e.ratingAverage,"  "]}),Object(c.jsxs)("div",{className:"d-flex justify-content-between ",children:[Object(c.jsx)(l.a,{to:"/view/".concat(e._id),className:"btn btn-outline-info",children:"View"}),Object(c.jsx)(l.a,{to:"/edit/".concat(e._id),className:"btn btn-outline-success",children:"Edit"}),Object(c.jsx)("botton",{className:"btn btn-outline-danger",onClick:function(t){return a=e._id,void d.a.delete("http://localhost:8000/restaurants/delete/".concat(a)).then((function(e){console.log(e.data.students),x()})).catch((function(e){return console.error(e)}));var a},children:"Delete"})]})]})]})})})}))]})},x=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(""),j=Object(o.a)(i,2),u=j[0],b=j[1],h=Object(n.useState)(2020),O=Object(o.a)(h,2),m=O[0],x=O[1],v=Object(n.useState)(""),p=Object(o.a)(v,2),g=p[0],f=p[1],N=Object(n.useState)({}),y=Object(o.a)(N,2),w=y[0],C=y[1];return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col-sm-8 offset-sm-2 ",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"Add A New Restaurant "}),Object(c.jsx)("div",{className:"card body",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:s,cuisine:u,yearOpened:m,description:g};d.a.post("http://localhost:8000/restaurants/new",t).then((function(e){console.log(e.data.restaurants),e.data.errors?C(e.data.errors):Object(l.c)("/")})).catch((function(e){return console.error(e)}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Name: "}),Object(c.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return r(e.target.value)},value:s}),Object(c.jsx)("p",{className:"text-danger",children:w.name?w.name.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Cuisine: "}),Object(c.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return b(e.target.value)},value:u}),Object(c.jsx)("p",{className:"text-danger",children:w.cuisine?w.cuisine.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Year Established: "}),Object(c.jsx)("input",{type:"Number",className:"form-control ",max:"2020",onChange:function(e){return x(e.target.value)},value:m}),Object(c.jsx)("p",{className:"text-danger",children:w.yearOpened?w.yearOpened.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Description: "}),Object(c.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return f(e.target.value)},value:g}),Object(c.jsx)("p",{className:"text-danger",children:w.description?w.description.message:""})]}),Object(c.jsx)("input",{type:"submit",value:"Add A New Restaurant ",className:"btn btn-primary"})]})})]})})})})},v=function(e){return Object(c.jsxs)("span",{children:[Array(e.rating+1).join("\u2605"),Array(5-e.rating+1).join("\u2606")]})},p=a(24),g=a.n(p),f=function(e){var t=Object(n.useState)({reviews:[]}),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(""),l=Object(o.a)(i,2),j=l[0],u=l[1],b=Object(n.useState)(3),m=Object(o.a)(b,2),x=m[0],p=m[1],f=Object(n.useState)(""),N=Object(o.a)(f,2),y=N[0],w=N[1],C=Object(n.useState)({}),A=Object(o.a)(C,2),S=A[0],R=A[1];function _(){d.a.get("http://localhost:8000/restaurants/".concat(e._id)).then((function(e){console.log(e.data.restaurant),r(e.data.restaurant)})).catch((function(e){return console.error(e)}))}Object(n.useEffect)((function(){_()}),[]),Array.prototype.reverseRev=function(){var e=Object(O.a)(this);return e.reverse(),e};return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row my-5",children:[Object(c.jsx)("div",{className:"col-sm-5  ",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:s.name}),Object(c.jsxs)("div",{className:"card body",children:[Object(c.jsxs)("p",{children:["Cuisine: ",s.cuisine,"  "]}),Object(c.jsxs)("p",{children:["Year Established: ",s.yearOpened,"  "]}),Object(c.jsxs)("p",{children:["Description: ",s.description,"  "]}),Object(c.jsxs)("p",{children:["Average rating: ",function(e){var t,a=0,c=Object(h.a)(e);try{for(c.s();!(t=c.n()).done;){a+=t.value.rating}}catch(n){c.e(n)}finally{c.f()}return(a/e.length).toFixed(1)}(s.reviews)," "]})]})]})}),Object(c.jsx)("div",{className:"col-sm-5  ",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"Leave A Review "}),Object(c.jsx)("div",{className:"card body",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a={name:j,rating:x,content:y};d.a.post("http://localhost:8000/restaurants/".concat(e._id,"/review"),a).then((function(e){console.log(e.data.restaurant),e.data.errors?R(e.data.errors):(_(),R({}))})).catch((function(e){return console.error(e)}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Your Name: "}),Object(c.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return u(e.target.value)},value:j}),Object(c.jsx)("p",{className:"text-danger",children:S.name?S.name.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Rating: "}),Object(c.jsxs)("select",{onChange:function(e){return p(e.target.value)},value:x,children:[Object(c.jsx)("option",{value:"1",children:"\u2605\u2606\u2606\u2606\u2606"}),Object(c.jsx)("option",{value:"2",children:"\u2605\u2605\u2606\u2606\u2606"}),Object(c.jsx)("option",{value:"3",children:"\u2605\u2605\u2605\u2606\u2606"}),Object(c.jsx)("option",{value:"4",children:"\u2605\u2605\u2605\u2605\u2606"}),Object(c.jsx)("option",{value:"5",children:"\u2605\u2605\u2605\u2605\u2605"})]}),Object(c.jsx)("p",{className:"text-danger",children:S.rating?S.rating.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Content: "}),Object(c.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return w(e.target.value)},value:y}),Object(c.jsx)("p",{className:"text-danger",children:S.content?S.content.message:""})]}),Object(c.jsx)("input",{type:"submit",value:"Leave A Review",className:"btn btn-primary"})]})})]})}),Object(c.jsx)("div",{className:"col-10  ",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsxs)("div",{className:"card-header bg-dark text-light",children:[s.name," Reviews"]}),s.reviews.reverseRev().map((function(e){return Object(c.jsxs)("div",{className:"card body",children:[Object(c.jsx)(v,{rating:e.rating}),Object(c.jsxs)("p",{children:[e.name," says :",e.content," "]}),Object(c.jsx)("p",{children:g()(e.createdAt).fromNow()})]})}))]})})]})})};var N=function(){return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(l.a,{to:"/",className:"btn btn-outline-info",children:"View All Restaurants"}),Object(c.jsx)(l.a,{to:"/new",className:"btn btn-outline-info",children:"Add A New Restaurant"}),Object(c.jsxs)(l.b,{children:[Object(c.jsx)(m,{path:"/"}),Object(c.jsx)(x,{path:"/new"}),Object(c.jsx)(u,{path:"/edit/:_id"}),Object(c.jsx)(f,{path:"/view/:_id"})]})]})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,57)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(N,{})}),document.getElementById("root")),y()}},[[56,1,2]]]);
//# sourceMappingURL=main.07750c56.chunk.js.map